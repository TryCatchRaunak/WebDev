testing promises without async function